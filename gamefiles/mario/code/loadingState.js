Mario.LoadingState=function(){this.Images=[],this.ImagesLoaded=!1,this.ScreenColor=0,this.ColorDirection=1,this.ImageIndex=0,this.SoundIndex=0},Mario.LoadingState.prototype=new Enjine.GameState,Mario.LoadingState.prototype.Enter=function(){for(var s=0,s=0;s<15;s++)this.Images[s]={};this.Images[0].name="background",this.Images[1].name="endScene",this.Images[2].name="enemies",this.Images[3].name="fireMario",this.Images[4].name="font",this.Images[5].name="gameOverGhost",this.Images[6].name="items",this.Images[7].name="logo",this.Images[8].name="map",this.Images[9].name="mario",this.Images[10].name="particles",this.Images[11].name="racoonMario",this.Images[12].name="smallMario",this.Images[13].name="title",this.Images[14].name="worldMap",this.Images[0].src="images/bgsheet.png",this.Images[1].src="images/endscene.gif",this.Images[2].src="images/enemysheet.png",this.Images[3].src="images/firemariosheet.png",this.Images[4].src="images/font.gif",this.Images[5].src="images/gameovergost.gif",this.Images[6].src="images/itemsheet.png",this.Images[7].src="images/logo.gif",this.Images[8].src="images/mapsheet.png",this.Images[9].src="images/mariosheet.png",this.Images[10].src="images/particlesheet.png",this.Images[11].src="images/racoonmariosheet.png",this.Images[12].src="images/smallmariosheet.png",this.Images[13].src="images/title.gif",this.Images[14].src="images/worldmap.png",Enjine.Resources.AddImages(this.Images),(new Audio).canPlayType("audio/mp3")?Enjine.Resources.AddSound("1up","sounds/1-up.mp3",1).AddSound("breakblock","sounds/breakblock.mp3").AddSound("bump","sounds/bump.mp3",4).AddSound("cannon","sounds/cannon.mp3").AddSound("coin","sounds/coin.mp3",5).AddSound("death","sounds/death.mp3",1).AddSound("exit","sounds/exit.mp3",1).AddSound("fireball","sounds/fireball.mp3",1).AddSound("jump","sounds/jump.mp3").AddSound("kick","sounds/kick.mp3").AddSound("pipe","sounds/pipe.mp3",1).AddSound("powerdown","sounds/powerdown.mp3",1).AddSound("powerup","sounds/powerup.mp3",1).AddSound("sprout","sounds/sprout.mp3",1).AddSound("stagestart","sounds/stagestart.mp3",1).AddSound("stomp","sounds/stomp.mp3",2):Enjine.Resources.AddSound("1up","sounds/1-up.wav",1).AddSound("breakblock","sounds/breakblock.wav").AddSound("bump","sounds/bump.wav",2).AddSound("cannon","sounds/cannon.wav").AddSound("coin","sounds/coin.wav",5).AddSound("death","sounds/death.wav",1).AddSound("exit","sounds/exit.wav",1).AddSound("fireball","sounds/fireball.wav",1).AddSound("jump","sounds/jump.wav",1).AddSound("kick","sounds/kick.wav",1).AddSound("message","sounds/message.wav",1).AddSound("pipe","sounds/pipe.wav",1).AddSound("powerdown","sounds/powerdown.wav",1).AddSound("powerup","sounds/powerup.wav",1).AddSound("sprout","sounds/sprout.wav",1).AddSound("stagestart","sounds/stagestart.wav",1).AddSound("stomp","sounds/stomp.wav",1),Mario.Tile.LoadBehaviors()},Mario.LoadingState.prototype.Exit=function(){delete this.Images},Mario.LoadingState.prototype.Update=function(s){if(!this.ImagesLoaded){this.ImagesLoaded=!0;for(var e=0,e=0;e<this.Images.length;e++)if(!0!==Enjine.Resources.Images[this.Images[e].name].complete){this.ImagesLoaded=!1;break}}this.ScreenColor+=255*this.ColorDirection*s,255<this.ScreenColor?(this.ScreenColor=255,this.ColorDirection=-1):this.ScreenColor<0&&(this.ScreenColor=0,this.ColorDirection=1)},Mario.LoadingState.prototype.Draw=function(s){var e;this.ImagesLoaded?s.fillStyle="rgb(0, 0, 0)":(e=parseInt(this.ScreenColor,10),s.fillStyle="rgb("+e+","+e+","+e+")"),s.fillRect(0,0,640,480)},Mario.LoadingState.prototype.CheckForChange=function(s){this.ImagesLoaded&&(Mario.GlobalMapState=new Mario.MapState,s.ChangeState(new Mario.TitleState))};