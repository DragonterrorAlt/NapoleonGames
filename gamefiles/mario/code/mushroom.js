Mario.Mushroom=function(i,t,h){this.RunTime=0,this.GroundInertia=.89,this.AirInertia=.89,this.OnGround=!1,this.Width=4,this.Height=24,this.World=i,this.X=t,this.Y=h,this.Image=Enjine.Resources.Images.items,this.XPicO=8,this.YPicO=15,this.YPic=0,this.Height=12,this.Facing=1,this.PicWidth=this.PicHeight=16,this.Life=0},Mario.Mushroom.prototype=new Mario.NotchSprite,Mario.Mushroom.prototype.CollideCheck=function(){var i=Mario.MarioCharacter.X-this.X,t=Mario.MarioCharacter.Y-this.Y;-16<i&&i<16&&t>-this.Height&&t<Mario.MarioCharacter.Height&&(Mario.MarioCharacter.GetMushroom(),this.World.RemoveSprite(this))},Mario.Mushroom.prototype.Move=function(){if(this.Life<9)return this.Layer=0,this.Y--,void this.Life++;this.Layer=1,2<this.Xa&&(this.Facing=1),this.Xa<-2&&(this.Facing=-1),this.Xa=1.75*this.Facing,this.XFlip=-1===this.Facing,this.RunTime+=Math.abs(this.Xa)+5,this.SubMove(this.Xa,0)||(this.Facing=-this.Facing),this.OnGround=!1,this.SubMove(0,this.Ya),this.Ya*=.85,this.OnGround?this.Xa*=this.GroundInertia:this.Xa*=this.AirInertia,this.OnGround||(this.Ya+=2)},Mario.Mushroom.prototype.SubMove=function(i,t){for(var h=!1;8<i;){if(!this.SubMove(8,0))return!1;i-=8}for(;i<-8;){if(!this.SubMove(-8,0))return!1;i+=8}for(;8<t;){if(!this.SubMove(0,8))return!1;t-=8}for(;t<-8;){if(!this.SubMove(0,-8))return!1;t+=8}return 0<t&&(this.IsBlocking(this.X+i-this.Width,this.Y+t,i,0)||this.IsBlocking(this.X+i+this.Width,this.Y+t,i,0)||this.IsBlocking(this.X+i-this.Width,this.Y+t+1,i,t)||this.IsBlocking(this.X+i+this.Width,this.Y+t+1,i,t))&&(h=!0),t<0&&(this.IsBlocking(this.X+i,this.Y+t-this.Height,i,t)||h||this.IsBlocking(this.X+i-this.Width,this.Y+t-this.Height,i,t)||h||this.IsBlocking(this.X+i+this.Width,this.Y+t-this.Height,i,t))&&(h=!0),0<i&&(this.IsBlocking(this.X+i+this.Width,this.Y+t-this.Height,i,t)&&(h=!0),this.IsBlocking(this.X+i+this.Width,this.Y+t-(this.Height/2|0),i,t)&&(h=!0),this.IsBlocking(this.X+i+this.Width,this.Y+t,i,t)&&(h=!0)),i<0&&(this.IsBlocking(this.X+i-this.Width,this.Y+t-this.Height,i,t)&&(h=!0),this.IsBlocking(this.X+i-this.Width,this.Y+t-(this.Height/2|0),i,t)&&(h=!0),this.IsBlocking(this.X+i-this.Width,this.Y+t,i,t)&&(h=!0)),h?(i<0&&(this.X=16*((this.X-this.Width)/16|0)+this.Width,this.Xa=0),0<i&&(this.X=16*((this.X+this.Width)/16+1|0)-this.Width-1,this.Xa=0),t<0&&(this.Y=16*((this.Y-this.Height)/16|0)+this.Height,this.JumpTime=0,this.Ya=0),0<t&&(this.Y=16*((this.Y-1)/16+1|0)-1,this.OnGround=!0),!1):(this.X+=i,this.Y+=t,!0)},Mario.Mushroom.prototype.IsBlocking=function(i,t,h,s){return t=t/16|0,!((i=i/16|0)===this.X/16|0&&t===this.Y/16|0)&&this.World.Level.IsBlocking(i,t,h,s)},Mario.Mushroom.prototype.BumpCheck=function(i,t){this.X+this.Width>16*i&&this.X-this.Width<16*i-16&&t===(t-1)/16|0&&(this.Facing=-Mario.MarioCharacter.Facing,this.Ya=-10)};