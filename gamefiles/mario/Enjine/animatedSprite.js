Enjine.AnimationSequence=function(e,t,i,n){this.StartRow=e,this.StartColumn=t,this.EndRow=i,this.EndColumn=n,this.SingleFrame=!1,this.StartRow==this.EndRow&&this.StartColumn==this.EndColumn&&(this.SingleFrame=!0)},Enjine.AnimatedSprite=function(){this.LastElapsed=0,this.FramesPerSecond=.05,this.CurrentSequence=null,this.Playing=!1,this.Looping=!1,this.Rows=0,this.Columns=0,this.Sequences=new Object},Enjine.AnimatedSprite.prototype=new Enjine.FrameSprite,Enjine.AnimatedSprite.prototype.Update=function(e){var t;this.CurrentSequence.SingleFrame||this.Playing&&(this.LastElapsed-=e,0<this.LastElapsed||(this.LastElapsed=this.FramesPerSecond,this.FrameX+=this.FrameWidth,this.FrameX>this.Image.width-this.FrameWidth&&(this.FrameX=0,this.FrameY+=this.FrameHeight,this.FrameY>this.Image.height-this.FrameHeight&&(this.FrameY=0)),t=!1,(this.FrameX>this.CurrentSequence.EndColumn*this.FrameWidth&&this.FrameY==this.CurrentSequence.EndRow*this.FrameHeight||0==this.FrameX&&this.FrameY>this.CurrentSequence.EndRow*this.FrameHeight)&&(t=!0),t&&(this.Looping?(this.FrameX=this.CurrentSequence.StartColumn*this.FrameWidth,this.FrameY=this.CurrentSequence.StartRow*this.FrameHeight):this.Playing=!1)))},Enjine.AnimatedSprite.prototype.PlaySequence=function(e,t){this.Playing=!0,this.Looping=t,this.CurrentSequence=this.Sequences["seq_"+e],this.FrameX=this.CurrentSequence.StartColumn*this.FrameWidth,this.FrameY=this.CurrentSequence.StartRow*this.FrameHeight},Enjine.AnimatedSprite.prototype.StopLooping=function(){this.Looping=!1},Enjine.AnimatedSprite.prototype.StopPlaying=function(){this.Playing=!1},Enjine.AnimatedSprite.prototype.SetFrameWidth=function(e){this.FrameWidth=e,this.Rows=this.Image.width/this.FrameWidth},Enjine.AnimatedSprite.prototype.SetFrameHeight=function(e){this.FrameHeight=e,this.Columns=this.Image.height/this.FrameHeight},Enjine.AnimatedSprite.prototype.SetColumnCount=function(e){this.FrameWidth=this.Image.width/e,this.Columns=e},Enjine.AnimatedSprite.prototype.SetRowCount=function(e){this.FrameHeight=this.Image.height/e,this.Rows=e},Enjine.AnimatedSprite.prototype.AddExistingSequence=function(e,t){this.Sequences["seq_"+e]=t},Enjine.AnimatedSprite.prototype.AddNewSequence=function(e,t,i,n,s){this.Sequences["seq_"+e]=new Enjine.AnimationSequence(t,i,n,s)},Enjine.AnimatedSprite.prototype.DeleteSequence=function(e){null!=this.Sequences["seq_"+e]&&delete this.Sequences["seq_"+e]},Enjine.AnimatedSprite.prototype.ClearSequences=function(){delete this.Sequences,this.Sequences=new Object};