function KeyboardInputManager(){this.events={},window.navigator.msPointerEnabled?(this.eventTouchstart="MSPointerDown",this.eventTouchmove="MSPointerMove",this.eventTouchend="MSPointerUp"):(this.eventTouchstart="touchstart",this.eventTouchmove="touchmove",this.eventTouchend="touchend"),this.listen()}KeyboardInputManager.prototype.on=function(t,e){this.events[t]||(this.events[t]=[]),this.events[t].push(e)},KeyboardInputManager.prototype.emit=function(t,e){var n=this.events[t];n&&n.forEach(function(t){t(e)})},KeyboardInputManager.prototype.listen=function(){var s,h,u=this,o={38:0,39:1,40:2,37:3,75:0,76:1,74:2,72:3,87:0,68:1,83:2,65:3};document.addEventListener("keydown",function(t){var e=t.altKey||t.ctrlKey||t.metaKey||t.shiftKey,n=o[t.which];e||void 0!==n&&(t.preventDefault(),u.emit("move",n)),e||82!==t.which||u.restart.call(u,t)}),this.bindButtonPress(".retry-button",this.restart),this.bindButtonPress(".restart-button",this.restart),this.bindButtonPress(".keep-playing-button",this.keepPlaying);var t=document.getElementsByClassName("game-container")[0];t.addEventListener(this.eventTouchstart,function(t){!window.navigator.msPointerEnabled&&1<t.touches.length||1<t.targetTouches.length||(h=window.navigator.msPointerEnabled?(s=t.pageX,t.pageY):(s=t.touches[0].clientX,t.touches[0].clientY),t.preventDefault())}),t.addEventListener(this.eventTouchmove,function(t){t.preventDefault()}),t.addEventListener(this.eventTouchend,function(t){var e,n,o,i,a,r;!window.navigator.msPointerEnabled&&0<t.touches.length||0<t.targetTouches.length||(n=window.navigator.msPointerEnabled?(e=t.pageX,t.pageY):(e=t.changedTouches[0].clientX,t.changedTouches[0].clientY),o=e-s,i=Math.abs(o),a=n-h,r=Math.abs(a),10<Math.max(i,r)&&u.emit("move",r<i?0<o?1:3:0<a?2:0))})},KeyboardInputManager.prototype.restart=function(t){t.preventDefault(),this.emit("restart")},KeyboardInputManager.prototype.keepPlaying=function(t){t.preventDefault(),this.emit("keepPlaying")},KeyboardInputManager.prototype.bindButtonPress=function(t,e){var n=document.querySelector(t);n.addEventListener("click",e.bind(this)),n.addEventListener(this.eventTouchend,e.bind(this))};